#include "c64mouse.h"

#define MOUSEDATAFORBANK0	(char*)0x0340

const unsigned char mouse_def_pointercolor = COLOR_RED;

const unsigned char mouse_def_pointershape[63] = 
{	
	#ifdef MULTICOLORMOUSE	
	// new style for c64AI
	0x70, 0x00, 0x00, 0x6F, 0x00, 0x00, 0x1A, 0xF0, 0x00, 0x1A, 0xAF, 0x00,
	0x06, 0xAA, 0x00, 0x06, 0xA9, 0x00, 0x01, 0xAB, 0x00, 0x01, 0xA6, 0xC0,
	0x00, 0x61, 0xB0, 0x00, 0x60, 0x60, 0x00, 0x10, 0x10, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00
	
	#else	
	// option 3 monochrome 	
	0x80,0x00,0x00,0xc0,0x00,0x00,0xe0,0x00,
	0x00,0xf0,0x00,0x00,0xf8,0x00,0x00,0xfc,
	0x00,0x00,0xf0,0x00,0x00,0xb8,0x00,0x00,
	0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00	
	#endif
};

void __fastcall__ mouseDriver(unsigned char Error)
{
	/* mouse pointer setup */
	#ifdef MULTICOLORMOUSE
	__asm__("lda $d01c");
	__asm__("ora #$01");
	__asm__("sta $d01c");
	__asm__("lda #$00");
	__asm__("sta $d025");
	__asm__("lda #$0f");
	__asm__("sta $d026");
	#endif
	
	if (Error != MOUSE_ERR_OK) 
	{	
        cprintf ("\nMouse Install: %s(%u)\r\n", mouse_geterrormsg (Error), Error);
        if (doesclrscrafterexit ()) {
            cgetc ();
        }
    }
}

void __fastcall__ installMouse()
{
	/* Install static mouse driver */
    mouseDriver(
		mouse_install(
			&mouse_def_callbacks, 
			&mouse_static_stddrv
			));

	/* show mouse pointer */
	__asm__("lda #$0d");
	__asm__("sta $07f8");
	
	mouse_show();
}

void __fastcall__ uninstallMouse()
{
	/* Uninstall static mouse driver */
    mouseDriver(mouse_uninstall());
}


